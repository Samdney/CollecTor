<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>CollecTor &mdash; What is in the data?</title>
<link href="css/style.css" type="text/css" rel="stylesheet">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<link href="favicon.ico" type="image/x-icon" rel="shortcut icon">
</head>
<body>

<div class="box">

<h1><a href="index.html">CollecTor</a> &mdash;</h1>
<h2>What is in the data?</h2>

<p>
The Tor network data provided here comes from five different sources which
are explained in more detail on this page.
You may either read through the entire page or jump to the type of data
you're most interested in:

<ul>
<li><a href="#relay-descriptors">Tor relay descriptors</a></li>
<li><a href="#bridge-descriptors">Tor bridge descriptors</a></li>
<li><a href="#bridge-pool-assignments">BridgeDB's bridge pool
assignments</a></li>
<li><a href="#exit-lists">TorDNSEL's exit lists</a></li>
<li><a href="#torperf">Torperf's performance data</a></li>
</ul>

<p>
Each descriptor provided here contains an <tt>@type</tt> annotation using
the format <tt>@type $descriptortype $major.$minor</tt>.
Any tool that processes these descriptors may parse files without meta
data or with an unknown descriptor type at its own risk, can safely parse
files with known descriptor type and same major version number, and should
not parse files with known descriptor type and higher major version
number.
</p>

</div> <!-- box -->

<div class="box">

<a name="relay-descriptors"></a>
<h2>Tor relay descriptors <a href="#relay-descriptors">#</a></h2>

<p>
Relays and directory authorities publish relay descriptors, so that
clients can select relays for their paths through the Tor network.
All these relay descriptors are specified in the
<a href="https://gitweb.torproject.org/torspec.git/tree/dir-spec.txt">Tor
directory protocol, version 3</a> specification document (or in the
earlier protocol versions
<a href="https://gitweb.torproject.org/torspec.git/tree/attic/dir-spec-v2.txt">2</a> or
<a href="https://gitweb.torproject.org/torspec.git/tree/attic/dir-spec-v1.txt">1</a>).
This page shall give a quick overview of what relay descriptors are
available.
</p>

<h3>Server descriptors
(<a href="archive/relay-descriptors/server-descriptors/">archive</a>,
<a href="recent/relay-descriptors/server-descriptors/">recent</a>)
<span class="type-annotation"><tt>@type server-descriptor 1.0</tt></span>
</h3>

<p>
Server descriptors contain information that relays publish about
themselves.
Tor clients once downloaded this information, but now they use
microdescriptors instead.
The server descriptors in
<a href="archive/relay-descriptors/server-descriptors/">archive</a>
contain one descriptor per file, whereas the files in
<a href="recent/relay-descriptors/server-descriptors/">recent</a>
contain all descriptors collected in an hour concatenated into a single
file.
</p>

<h3>Extra-info descriptors
(<a href="archive/relay-descriptors/extra-infos/">archive</a>,
<a href="recent/relay-descriptors/extra-infos/">recent</a>)
<span class="type-annotation"><tt>@type extra-info 1.0</tt></span>
</h3>

<p>
Extra-info descriptors contain relay information that Tor clients do not
need in order to function.
This is self-published, like server descriptors, but not downloaded by
clients by default.
The extra-info descriptors in
<a href="archive/relay-descriptors/extra-infos/">archive</a>
contain one descriptor per file, whereas the files in
<a href="recent/relay-descriptors/extra-infos/">recent</a>
contain all descriptors collected in an hour concatenated into a single
file.
</p>

<h3>Network status consensuses
(<a href="archive/relay-descriptors/consensuses/">archive</a>,
<a href="recent/relay-descriptors/consensuses/">recent</a>)
<span class="type-annotation"><tt>@type network-status-consensus-3
1.0</tt></span>
</h3>

<p>
Though Tor relays are decentralized, the directories that track the
overall network are not.
These central points are called directory authorities, and every hour they
publish a document called a consensus, or network status document.
The consensus in turn is made up of router status entries containing
flags, heuristics used for relay selection, etc.
</p>

<h3>Network status votes
(<a href="archive/relay-descriptors/votes/">archive</a>,
<a href="recent/relay-descriptors/votes/">recent</a>)
<span class="type-annotation"><tt>@type network-status-vote-3
1.0</tt></span>
</h3>

<p>
The directory authorities exchange votes every hour to come up with a
common consensus.
Vote documents are by far the largest documents provided here.
</p>

<h3>Directory key certificates
(<a href="archive/relay-descriptors/certs.tar.xz">archive</a>)
<span class="type-annotation"><tt>@type dir-key-certificate-3
1.0</tt></span>
</h3>

<p>
The directory authorities sign their votes and the consensus with their
key that they publish in a key certificate.
These key certificates change once every few months, so they are only
available in the
<a href="archive/relay-descriptors/certs.tar.xz">archive</a>.
</p>

<h3>Microdescriptor consensuses
(<a href="archive/relay-descriptors/microdescs/">archive</a>,
<a href="recent/relay-descriptors/microdescs/">recent</a>)
<span class="type-annotation"><tt>@type
network-status-microdesc-consensus-3 1.0</tt></span>
</h3>

<p>
Tor clients used to download all server descriptors of active relays, but
now they only download the smaller microdescriptors which are derived from
server descriptors.
The microdescriptor consensus lists all active relays and references their
currently used microdescriptor.
The tarballs in
<a href="archive/relay-descriptors/microdescs/">archive</a>
contain both microdescriptor consensuses and referenced microdescriptors
together.
</p>

<h3>Microdescriptors
(<a href="archive/relay-descriptors/microdescs/">archive</a>,
<a href="recent/relay-descriptors/microdescs/">recent</a>)
<span class="type-annotation"><tt>@type microdescriptor 1.0</tt></span>
</h3>

<p>
Microdescriptors are minimalistic documents that just includes the
information necessary for Tor clients to work.
The tarballs in
<a href="archive/relay-descriptors/microdescs/">archive</a>
contain both microdescriptor consensuses and referenced microdescriptors
together.
The microdescriptors in
<a href="archive/relay-descriptors/microdescs/">archive</a>
contain one descriptor per file, whereas the files in
<a href="recent/relay-descriptors/microdescs/">recent</a>
contain all descriptors collected in an hour concatenated into a single
file.
</p>

<h3>Version 2 network statuses
(<a href="archive/relay-descriptors/statuses/">archive</a>)
<span class="type-annotation"><tt>@type network-status-2 1.0</tt></span>
</h3>

<p>
Version 2 network statuses have been published by the directory
authorities before consensuses have been introduced.
In contrast to consensuses, each directory authority published their own
authoritative view on the network, and clients combined these documents
locally.
We stopped archiving version 2 network statuses in 2012.
</p>

<h3>Version 1 directories
(<a href="archive/relay-descriptors/tor/">archive</a>)
<span class="type-annotation"><tt>@type directory 1.0</tt></span>
</h3>

<p>
The first directory protocol version combined the list of active relays
with server descriptors in a single directory document.
We stopped archiving version 1 directories in 2007.
</p>

</div> <!-- box -->

<div class="box">

<a name="bridge-descriptors"></a>
<h2>Tor bridge descriptors <a href="#bridge-descriptors">#</a></h2>

<p>
Bridges and the bridge authority publish bridge descriptors that are used
by censored clients to connect to the Tor network.
We cannot, however, make bridge descriptors available as we do with relay
descriptors, because that would defeat the purpose of making bridges hard
to enumerate for censors.
We therefore sanitize bridge descriptors by removing all potentially
identifying information and publish sanitized versions here.
The sanitizing steps are as follows:
</p>

<ol>
<li><b>Replace bridge identities with their digests:</b> Clients
can request a bridge's current descriptor by sending its identity string
to the bridge authority.
This is a feature to make bridges on dynamic IP addresses useful.
Therefore, the original identities (and anything that could be used to
derive them) need to be removed from the descriptors.
The bridge's RSA-based identity fingerprint is replaced with its SHA-1
hash value, and the bridge's optional base64-encoded Ed25519 master key is
replaced with its SHA-256 digest.
The idea is to have a consistent replacement that remains stable over
months or even years (without keeping a secret for a keyed hash
function).</li>
<li><b>Remove most cryptographic keys and signatures:</b> It would be
straightforward to learn about the bridge identity from the bridge's
public key.
Replacing keys by newly generated ones seemed to be unnecessary (and would
involve keeping a state over months/years), so that most cryptographic
keys and signatures have simply been removed.</li>
<li><b>Replace IP address with IP address hash:</b> Of course, IP
addresses need to be sanitized, too.
<ul><li>IPv4 addresses are replaced with <tt>10.x.x.x</tt> with
<tt>x.x.x</tt> being the 3 byte output of
<tt>H(IP address | bridge identity | secret)[:3]</tt>.
The input <tt>IP address</tt> is the 4-byte long binary representation of
the bridge's current IP address.
The <tt>bridge identity</tt> is the 20-byte long binary representation of
the bridge's long-term identity fingerprint.
The <tt>secret</tt> is a 31-byte long secure random string that changes
once per month for all descriptors and statuses published in that month.
<tt>H()</tt> is SHA-256.
The <tt>[:3]</tt> operator means that we pick the 3 most significant bytes
of the result.</li>
<li>IPv6 addresses are replaced with <tt>[fd9f:2e19:3bcf::xx:xxxx]</tt>
with <tt>xx:xxxx</tt> being the hex-formatted 3 byte output of a similar
hash function as described for IPv4 addresses.
The only differences are that the input <tt>IP address</tt> is 16 bytes
long and the <tt>secret</tt> is only 19 bytes long.</li></ul>
<li><b>Replace contact information:</b> If there is contact information in
a descriptor, the contact line is changed to
<tt>somebody</tt>.</li>
<li><b>Remove pluggable transport addresses and arguments:</b> Bridges may
provide transports in addition to the onion-routing protocol and include
information about these transports in their extra-info descriptors for
BridgeDB.
In that case, any IP addresses, TCP ports, or additional arguments are
removed, only leaving in the supported transport names.</li>
<li><b>Append descriptor digests:</b> Descriptors are often referenced by
their digest, but that is not possible anymore once their content has
changed.
As a workaround, sanitized descriptors contain a new line
<tt>router-digest</tt> with the hex representation of the SHA-1 of the
original descriptor digest excluding RSA signature and&mdash;if the bridge
uses an Ed25519 identity&mdash;a new line <tt>router-digest-sha256</tt>
with the base64-encoded SHA-256 of the SHA-256 digest of the original
descriptor including all signatures.</li>
</ol>

<h3>Network statuses
(<a href="archive/bridge-descriptors/">archive</a>,
<a href="recent/bridge-descriptors/statuses/">recent</a>)
<span class="type-annotation"><tt>@type bridge-network-status
1.0</tt></span>
</h3>

<p>
Sanitized bridge network statuses are similar to version 2 relay network
statuses, but with only a <tt>published</tt> line in the header and
without any lines in the footer.
The tarballs in
<a href="archive/bridge-descriptors/">archive</a> contain all bridge
descriptors of a given month, not just network statuses.
</p>

<h3>Server descriptors
(<a href="archive/bridge-descriptors/">archive</a>,
<a href="recent/bridge-descriptors/server-descriptors/">recent</a>)
<span class="type-annotation"><tt>@type bridge-server-descriptor
1.1</tt></span>
</h3>

<p>
Bridge server descriptors follow the same format as relay server
descriptors, except for the sanitizing steps described above.
The tarballs in
<a href="archive/bridge-descriptors/">archive</a> contain all bridge
descriptors of a given month, not just server descriptors.
These tarballs contain one descriptor per file, whereas the
files in
<a href="recent/bridge-descriptors/server-descriptors/">recent</a>
contain all descriptors collected in an hour concatenated into a single
file to reduce the number of files.
The format has changed over time to accomodate changes to the sanitizing
process, with earlier versions being:
</p>

<ul>
<li><font color="#666"><tt>@type bridge-server-descriptor 1.0</tt> was the
first version.</font></li>
<li><font color="#666">There was supposed to be a newer version indicating
added <tt>ntor-onion-key</tt> lines, but due to a mistake only the version
number of sanitized bridge extra-info descriptors was raised.
As a result, there may be sanitized bridge server descriptors with version
<tt>@type bridge-server-descriptor 1.0</tt> with and without those
lines.</font></li>
<li><tt>@type bridge-server-descriptor 1.1</tt> added
<tt>master-key-ed25519</tt> lines and <tt>router-digest-sha256</tt> to
server descriptors published by bridges using an Ed25519 master key.</li>
</ul>

<h3>Extra-info descriptors
(<a href="archive/bridge-descriptors/">archive</a>,
<a href="recent/bridge-descriptors/extra-infos/">recent</a>)
<span class="type-annotation"><tt>@type bridge-extra-info 1.3</tt></span>
</h3>

<p>
Bridge extra-info descriptors follow the same format as relay extra-info
descriptors, except for the sanitizing steps described above.
The format has changed over time to accomodate changes to the sanitizing
process, with earlier versions being:
</p>

<ul>
<li><font color="#666"><tt>@type bridge-extra-info 1.0</tt> was the first
version.</font></li>
<li><font color="#666"><tt>@type bridge-extra-info 1.1</tt> added
sanitized <tt>transport</tt> lines.</font></li>
<li><font color="#666"><tt>@type bridge-extra-info 1.2</tt> was supposed
to indicate added <tt>ntor-onion-key</tt> lines, but those changes only
affect bridge server descriptors, not extra-info descriptors.
So, nothing has changed as compared to version 1.1.</font></li>
<li><tt>@type bridge-extra-info 1.3</tt> added <tt>master-key-ed25519</tt>
lines and <tt>router-digest-sha256</tt> to extra-info descriptors
published by bridges using an Ed25519 master key.</li>
</ul>

<p>
The tarballs in
<a href="archive/bridge-descriptors/">archive</a> contain all bridge
descriptors of a given month, not just extra-info descriptors.
These tarballs contain one descriptor per file, whereas the
files in
<a href="recent/bridge-descriptors/extra-infos/">recent</a>
contain all descriptors collected in an hour concatenated into a single
file to reduce the number of files.
</p>

</div> <!-- box -->

<div class="box">

<a name="bridge-pool-assignments"></a>
<h2>BridgeDB's bridge pool assignments
<a href="#bridge-pool-assignments">#</a></h2>

<p>
The bridge distribution service BridgeDB publishes bridge pool assignments
describing which bridges it has assigned to which distribution pool.
BridgeDB receives bridge network statuses from the bridge authority,
assigns these bridges to persistent distribution rings, and hands them out
to bridge users.
BridgeDB periodically dumps the list of running bridges with information
about the rings, subrings, and file buckets to which they are assigned to
a local file.
The sanitized versions of these lists containing SHA-1 hashes of bridge
fingerprints instead of the original fingerprints are available for
statistical analysis.
</p>

<h3>Bridge pool assignments
(<a href="archive/bridge-pool-assignments/">archive</a>)
<span class="type-annotation"><tt>@type bridge-pool-assignment
1.0</tt></span>
</h3>

<p>
The document below shows a BridgeDB pool assignment file
from March 13, 2011.
Every such file begins with a line containing the timestamp when BridgeDB
wrote this file.
Subsequent lines start with the SHA-1 hash of a bridge fingerprint,
followed by ring, subring, and/or file bucket information.
There are currently three distributor ring types in BridgeDB:
</p>

<ol>
<li><b>unallocated:</b> These bridges are not distributed by BridgeDB,
but are either reserved for manual distribution or are written to file
buckets for distribution via an external tool.
If a bridge in the <tt>unallocated</tt> ring is assigned to a file bucket,
this is noted by <tt>bucket=$bucketname</tt>.</li>
<li><b>email:</b> These bridges are distributed via an e-mail
autoresponder.  Bridges can be assigned to subrings by their OR port or
relay flag which is defined by <tt>port=$port</tt> and/or <tt>flag=$flag</tt>.
</li>
<li><b>https:</b> These bridges are distributed via https server.
There are multiple https rings to further distribute bridges by IP address
ranges, which is denoted by <tt>ring=$ring</tt>.
Bridges in the <tt>https</tt> ring can also be assigned to subrings by
OR port or relay flag which is defined by <tt>port=$port</tt> and/or
<tt>flag=$flag</tt>.</li>
</ol>

<pre>
bridge-pool-assignment 2011-03-13 14:38:03
00b834117566035736fc6bd4ece950eace8e057a unallocated
00e923e7a8d87d28954fee7503e480f3a03ce4ee email port=443 flag=stable
0103bb5b00ad3102b2dbafe9ce709a0a7c1060e4 https ring=2 port=443 flag=stable
[...]
</pre>

<p>
As of December 8, 2014, bridge pool assignment files are no longer
archived.
</p>

</div> <!-- box -->

<div class="box">

<a name="exit-lists"></a>
<h2>TorDNSEL's exit lists <a href="#exit-lists">#</a></h2>

<p>
The exit list service
<a href="https://www.torproject.org/tordnsel/dist/">TorDNSEL</a>
publishes exit lists containing the IP addresses of relays that it found
when exiting through them.
</p>

<h3>Exit lists
(<a href="archive/exit-lists/">archive</a>,
<a href="recent/exit-lists/">recent</a>)
<span class="type-annotation"><tt>@type tordnsel 1.0</tt></span>
</h3>

<p>
Tor Check makes the list of known exits and corresponding exit IP
addresses available in a specific format.
The document below shows an entry of the exit list written on
December 28, 2010 at 15:21:44 UTC.
This entry means that the relay with fingerprint <tt>63BA..</tt> which
published a descriptor at 07:35:55 and was contained in a version 2
network status from 08:10:11 uses two different IP addresses for exiting.
The first address <tt>91.102.152.236</tt> was found in a test performed at
07:10:30.
When looking at the corresponding server descriptor, one finds that this
is also the IP address on which the relay accepts connections from inside
the Tor network.
A second test performed at 10:35:30 reveals that the relay also uses IP
address <tt>91.102.152.227</tt> for exiting.
</p>

<pre>
ExitNode 63BA28370F543D175173E414D5450590D73E22DC
Published 2010-12-28 07:35:55
LastStatus 2010-12-28 08:10:11
ExitAddress 91.102.152.236 2010-12-28 07:10:30
ExitAddress 91.102.152.227 2010-12-28 10:35:30
</pre>

</div> <!-- box -->

<div class="box">

<a name="torperf"></a>
<h2>Torperf's performance data <a href="#torperf">#</a></h2>

<p>
The performance measurement service Torperf publishes performance data
from making simple HTTP requests over the Tor network.
Torperf uses a trivial SOCKS client to download files of various sizes
over the Tor network and notes how long substeps take.
</p>

<h3>Torperf measurement results
(<a href="archive/torperf/">archive</a>,
<a href="recent/torperf/">recent</a>)
<span class="type-annotation"><tt>@type torperf 1.0</tt></span>
</h3>

<p>
A Torperf results file contains a single line per Torperf run with
<tt>key=value</tt> pairs.
Such a result line is sufficient to learn about 1) the Tor and Torperf
configuration, 2) measurement results, and 3) additional information that
might help explain the results.
Known keys are explained below.
</p>
<ul>
<li>Configuration
<ul>
<li><tt>SOURCE:</tt> Configured name of the data source; required.</li>
<li><tt>FILESIZE:</tt> Configured file size in bytes; required.</li>
<li>Other meta data describing the Tor or Torperf configuration, e.g.,
GUARD for a custom guard choice; optional.</li>
</ul>
<li>Measurement results
<ul>
<li><tt>START:</tt> Time when the connection process starts;
required.</li>
<li><tt>SOCKET:</tt> Time when the socket was created; required.</li>
<li><tt>CONNECT:</tt> Time when the socket was connected; required.</li>
<li><tt>NEGOTIATE:</tt> Time when SOCKS 5 authentication methods have been
negotiated; required.</li>
<li><tt>REQUEST:</tt> Time when the SOCKS request was sent; required.</li>
<li><tt>RESPONSE:</tt> Time when the SOCKS response was received;
required.</li>
<li><tt>DATAREQUEST:</tt> Time when the HTTP request was written;
required.</li>
<li><tt>DATARESPONSE:</tt> Time when the first response was received;
required.</li>
<li><tt>DATACOMPLETE:</tt> Time when the payload was complete;
required.</li>
<li><tt>WRITEBYTES:</tt> Total number of bytes written; required.</li>
<li><tt>READBYTES:</tt> Total number of bytes read; required.</li>
<li><tt>DIDTIMEOUT:</tt> 1 if the request timed out, 0 otherwise;
optional.</li>
<li><tt>DATAPERCx:</tt> Time when x% of expected bytes were read for
x = { 10, 20, 30, 40, 50, 60, 70, 80, 90 }; optional.</li>
<li>Other measurement results, e.g., START_RENDCIRC, GOT_INTROCIRC, etc.
for hidden-service measurements; optional.</li>
</ul>
<li>Additional information
<ul>
<li><tt>LAUNCH:</tt> Time when the circuit was launched; optional.</li>
<li><tt>USED_AT:</tt> Time when this circuit was used; optional.</li>
<li><tt>PATH:</tt> List of relays in the circuit, separated by commas;
optional.</li>
<li><tt>BUILDTIMES:</tt> List of times when circuit hops were built,
separated by commas; optional.</li>
<li><tt>TIMEOUT:</tt> Circuit build timeout in milliseconds that the Tor
client used when building this circuit; optional.</li>
<li><tt>QUANTILE:</tt> Circuit build time quantile that the Tor client
uses to determine its circuit-build timeout; optional.</li>
<li><tt>CIRC_ID:</tt> Circuit identifier of the circuit used for this
measurement; optional.</li>
<li><tt>USED_BY:</tt> Stream identifier of the stream used for this
measurement; optional.</li>
<li>Other fields containing additional information; optional.</li>
</ul>
</ul>

<p>
The files in <a href="recent/torperf/extra-infos/">recent</a>
accumulate all new Torperf measurements of a given day, which means that
they may change throughout the day.
This is different from all other files in the <a href="recent/">recent</a>
directory which do not change once they are written.
</p>

</div> <!-- box -->

<div class="footer">
<p>Data on this site is freely available under a
<a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0 no
copyright declaration</a>: To the extent possible under law, the Tor
Project has waived all copyright and related or neighboring rights in the
data.</p>
</div>

</body>
</html>

